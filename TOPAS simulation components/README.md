All of the files needed for the TOPAS simulation with the Derenzo and XCAT phantom are contained in the “TOPAS simulation components” folder. The tuple recording extension is inside of “TOPAS simulation components/topas_extensions”. Follow the instructions contained in TOPAS for compiling with extensions to use this extension. 

Inside of the of the “TOPAS simulation components/derenzo” directory is all of the files needed to run a simulation of the LAB or LYSO scanner in TOPAS. “CrystalDerenzoScanner.txt” is a parameter file for the LYSO scanner and will produce a tuple of the interaction locations inside of the detector volume, which can later be read in using the classical_pet code in the “Compton Chain Algorithm and Image Creation” directory. “LABDerenzoScanner.txt” is a parameter file defining the LAB scanner. When TOPAS is run using this file it will produce the interaction locations to be read in by the “compton_reconstruction” code also contained in the “Compton Chain Algorithm and Image Creation” directory. 

The “derenzo_300keV_100.topas” file contains the TOPAS definition for the Derenzo phantom. It was created using the “build_derenzo.py” file reading in positions from “Delorzo2.txt”. The python file prints to stdout the correct contents for a TOPAS file containing the specified Derenzo. 

Inside of the "TOPAS simulation components/xcat" directory is all of the files needed to run a simulation of the XCAT phantom inside the LAB detector. "pet_scanner_lab.topas" is the TOPAS parameter file that one would run in TOPAS to produce a document of interaction tuples in the LAB detector, which can be run in the "compton_reconstruction" code. "xcat_whole_body_arms_side.par" and "xcat_spherical_lesion_brain.par" are two XCAT software parameter files that produce the full body phantom and the spherical lesion, respectively. One must run those files using the XCAT software, which we do not include. The two binary files produced by running each XCAT parameter file is then combined into one phantom file in "lesion_adder.py". The resulting binary file and its metadata file are referenced in "xcat_activity_phantom.topas" under the "InputFile" and "MetaDataFile" lines. "xcat_activity_phantom.topas" also references a materials file for the different XCAT tissues, which is found in "XCAT_Materials_tumor.txt". Finally, to add activity to the brain and other XCAT tissues, one uses "create_vol_sources.py", where one can specify the duration of the scan and the activity of different regions in kBq/mL. This file is also referenced in "xcat_activity_phantom.topas".

